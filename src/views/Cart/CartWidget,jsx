import React, { useContext, useState } from "react";
import { useNavigate } from "react-router-dom";
import { CartContext } from "../Cartcontext/CartContext";
import "./CartWidget.css";

const CartWidget = () => {
  const { totalItems, totalPrice } = useContext(CartContext);
  const [showTooltip, setShowTooltip] = useState(false);
  const navigate = useNavigate();

  const handleCartClick = () => {
    navigate("/cart");
  };

  const tooltipText =
    totalItems > 0
      ? `ğŸ›’ Ğ£ ĞºĞ¾ÑˆĞ¸ĞºÑƒ ${totalItems} Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ² Ğ½Ğ° ÑÑƒĞ¼Ñƒ ${totalPrice} Ğ³Ñ€Ğ½.`
      : "ğŸ›’ ĞšĞ¾ÑˆĞ¸Ğº Ğ¿Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ñ–Ğ¹";

  return (
    <div
      className="cart-wrapper"
      onMouseEnter={() => setShowTooltip(true)}
      onMouseLeave={() => setShowTooltip(false)}
    >
      <button className="cart-button" onClick={handleCartClick}>
        ğŸ›’ ĞšĞ¾ÑˆĞ¸Ğº
        <span className="cart-badge">({totalItems})</span>
      </button>

      <div className={`cart-tooltip ${showTooltip ? "visible" : ""}`}>
        {tooltipText}
      </div>
    </div>
  );
};

export default CartWidget;
